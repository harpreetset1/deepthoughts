from django.http import HttpResponse
import json, numpy, requests
from bson.objectid import ObjectId
# Create your views here.
def find_products(request, prod_id):
    from pymongo import MongoClient
    db = MongoClient("10.0.2.101",27017)['bb_beyond']
    if(prod_id == None or prod_id == ''):
        cursor = db['product'].find()
    else:
        cursor = db['product'].find({"_id":ObjectId(prod_id)})
    print(request)
    return HttpResponse(cursor)
def get_keywords(request, sentence):
    import nltk
    from nltk.stem.porter import PorterStemmer
    stemmer = PorterStemmer()
    filterWords = ['done','pleas','was','were','get','lot','able','more','much','most', 'go','other','too', 'have', 'have','had','did','do','thing','let','put','try','not','just']
    #from textblob import TextBlob
    #text = nltk.word_tokenize(sentence)
    '''from nltk.stem import WordNetLemmatizer
    wnl = WordNetLemmatizer()
    sentence1 = ''
    for word in sentence.split(' '):
        print(wnl.lemmatize(word,pos='v'))
        if(word.lower()!='to'):
            sentence1 +=wnl.lemmatize(word,pos='v')+' '
    print(sentence1)
    blob = TextBlob(sentence)
    print(blob.tags)
    print(blob.noun_phrases)'''
    text = nltk.word_tokenize(sentence)
    print(nltk.pos_tag(text))
    data = nltk.pos_tag(text)
    previousPOS = ''
    previoustoken = ''
    nounchain = []
    nouns = ''
    chainBreak = True
    print(data)
    idx = 0
    for pS in nltk.pos_tag(text):
        if(pS[1] =='NN' or pS[1] == 'NNP' or pS[1] == 'NNS' or pS[1] == 'NNPS'):
            print('previoustoken =%s and previousPOS=%s' % (previoustoken,previousPOS))
            print('newtoken=%s and newpos=%s' % (pS[0],pS[1]))
            print(len(nouns))
            if(len(previousPOS) > 0 and (stemmer.stem(previoustoken) not in filterWords) and (stemmer.stem(pS[0].lower()) not in filterWords)):
                if(previoustoken != pS[0] and (previousPOS[0]=='N' and pS[1][0] =='N' )):
                    if(len(nouns)==0 ):
                        nouns = previoustoken+' '+ pS[0]
                        print(idx)
                        #data = [t for t in data if (t[0]!=previoustoken and (cnt-1)==0)]
                        del data[idx-1]
                        idx-=1
                        
                    else:
                        nouns = nouns+' '+ pS[0]
                    #print(data)
                    #print(nouns)
                    #data = [t for t in data if (t[0]!=pS[0] and (cnt-1)==0)]
                    #print(idx)
                    del data[idx]
                    idx-=1
                    #print(data)
                    chainBreak=False
        else:
            chainBreak = True
                    
        if(chainBreak==True and nouns !=''):
            nounchain.append(nouns)
            nouns=''
        idx+=1    
        previoustoken = pS[0]
        previousPOS = pS[1]
    #nounlist = [noun for noun in nounchain if noun !='']
    print(nouns)
    if(chainBreak==False and nouns !=''):
        nounchain.append(nouns)
        nouns=''
    print('nounchain %s' % nounchain) 
    print(data)               
    allkeys = nounchain
    previousPOS = ''
    previoustoken = ''
    for pS in data:
        if(len(pS[0])>1):
            print(stemmer.stem(pS[0].lower()))
            if(pS[1] =='NN' or pS[1] == 'NNP' or pS[1] == 'NNS' or pS[1] == 'JJ' or pS[1] == 'NNPS' or pS[1] in ('VBG','VBN','VB')):
                
                if(len(previousPOS)>0 and (previousPOS[0]=='N' and pS[1][0] =='N' )):
                    if((len(allkeys[-1].split(' '))==1) ):
                        allkeys.pop()
                    if(previoustoken != pS[0].lower() and (stemmer.stem(previoustoken) not in filterWords) and (stemmer.stem(pS[0].lower()) not in filterWords)):
                        allkeys.append(previoustoken+' '+pS[0].lower())
                elif(len(previousPOS)>0 and (previousPOS[0]=='J' and pS[1][0] =='N' )):
                    if(len(allkeys)>0 and len(allkeys[-1].split(' '))==1):
                        allkeys.pop()
                    if(len(previoustoken)>2 and (stemmer.stem(previoustoken) not in filterWords) and (stemmer.stem(pS[0].lower()) not in filterWords)):
                        allkeys.append(previoustoken+' '+pS[0].lower())
                elif(stemmer.stem(pS[0].lower()) not in filterWords):
                    allkeys.append(pS[0].lower())
            
            if((previousPOS[0:2] == 'RB' and pS[1][0] in ('N','V','J'))):
                if(len(allkeys)>0 ):
                    allkeys.pop()
                if(len(previoustoken)>2 and (stemmer.stem(previoustoken) not in filterWords) and (stemmer.stem(pS[0].lower()) not in filterWords)):
                    allkeys.append(previoustoken+' '+pS[0].lower())
            elif((previousPOS == 'TO' and pS[1][0] in ('V')) and len(pS[0])>2):
                allkeys.append(pS[0].lower())
            elif((previousPOS[0:2] == 'VB' and pS[1][0] in ('N'))):
                if(len(allkeys)>0 and ((previoustoken in allkeys))):
                    allkeys.remove(previoustoken)
                if(len(stemmer.stem(previoustoken))>2 and (stemmer.stem(previoustoken) not in filterWords) and (stemmer.stem(pS[0].lower()) not in filterWords)):
                    allkeys.append(previoustoken+' '+pS[0].lower())
                
            
        previoustoken = pS[0].lower()
        previousPOS = pS[1]
    #
    
    uk = [keys for keys in allkeys if stemmer.stem(keys) not in filterWords]
    print(sorted(set(uk)))
    uniqueKeys = sorted(set(uk))
    #[x for x in allkeys if x not in uniqueKeys and (uniqueKeys.append(x) or True)]
    return HttpResponse(', '.join(uniqueKeys))
#get_keywords("request", "I use the Nike app it helps me track my workout and distance run as well as heart rate")
def find_keywords(request, sentence):
    import nltk
    from pymongo import MongoClient
    text = nltk.word_tokenize(sentence)
    print(nltk.pos_tag(text))
    noise = []
    keyWd =[]
    allkeys = []
    db = MongoClient("10.0.2.101",27017)['bb_beyond']
    url = 'http://conceptnet5.media.mit.edu/data/5.4/search?limit=10&rel=/r/Synonym&end=/c/en/'
    headers = {'content-type': 'application/json'}
    for pS in nltk.pos_tag(text):
        keys = []
        if(pS[1] =='NN' or pS[1] == 'NNP' or pS[1] == 'NNS' or pS[1] == 'JJ'):
            keys.append(pS[0])
            prodList = []
            url1 = url+ pS[0]
            resp = requests.request("GET", url1, data={}, headers=headers)
            #concepts = {} 
            concepts = resp.json()['edges']
            for concept in concepts:
                if(concept['dataset'].endswith('en')):
                    print('synonym of %s is %s' % (pS[0],concept['surfaceStart'].encode('utf-8')))
                    keys.append(concept['surfaceStart']) 
            cursor = db['styles'].find({"$text":{"$search":', '.join(keys)}})
            index = 0
            count = cursor.count()
            if(count >0):
                noise.append({"keyword":pS[0],"style":count})
            while index != count:
                doc = cursor[index]
                prodList.append(doc['style'])
                keyWd.append({"keyword":pS[0],"style":doc['style']})
                
                index+=1
            cursor.close()
            allkeys.extend(keys)
    #print(json.dumps(noise))
    print(allkeys)
    print(keyWd)
    from collections import Counter
    c1 = Counter(keyword['keyword'] for keyword in keyWd )
    print('keywords per category: %s' % c1)
    kw2 = [(k,v) for k, v in c1.items()] 
    print('new kw2: %s' % kw2)
    kw1 = []
    for kv in kw2:
        if(kv[1]<4):
            kw1.append(kv[0])
    print('new kw1: %s' % kw1)
    keyWd1 = []
    idx=0
    while(idx < len(keyWd)):
        if(keyWd[idx]['keyword'] in kw1):
            keyWd1.append({"keyword":keyWd[idx]['keyword'],"style":keyWd[idx]['style']})
        idx+=1     
    print('new keywd1: %s' % keyWd1)
    c = Counter(style['style'] for style in keyWd1)
    print('count per category: %s' % c)
    doc = db['product'].find_one()
    retKeyWd = doc['attributes']
    print(retKeyWd)
    for attr in doc['attributes'].keys():
        retKeyWd[attr]['weight']=0.0
        retKeyWd[attr]['confidence']=0.0
    for k, v in c.items():
        print(k)
        for attr in retKeyWd.keys():
            print(attr)
            if(k == attr):
                print('in if for %s and %s' % (k,attr))
                retKeyWd[attr]['weight'] +=v*0.1
                break;
    
    #kw = ','.join(keys)
    uniqueKeys = []
    unique = [x for x in kw1 if x not in uniqueKeys and (uniqueKeys.append(x) or True)]
    for attr in retKeyWd.keys():
        retKeyWd[attr]['keywords'] = uniqueKeys
    print(retKeyWd)
    return HttpResponse(json.dumps(retKeyWd))


def test_keywords(request):
    corpus = [
                {"style":"contemporary", "description": " It features a large backyard, swimming pool, outdoor kitchen and dining area, as well as an outdoor lounge. featuring two volumes separated by the outdoor lounge, the main one, where the living area, kitchen and master suite are and the side one, with suites for visiting guests. stone covered outdoor areas are outlined with hidden lighting which looks really stunning. The swimming pool is stepped down slightly from the house, and lighting is hidden within the steps to create a very nice atmosphere at night.  rooftop patio to take advantage of the views in the area. Pool area has a ordinary design with rectangular and squar-ish pavers around it. impressive feature of the house is this tree in it. A small section of the floor, ceiling and roof was removed to allow a tree to grow through it. Inside the home, the ceiling is secured in wood and the vast glass entryways open for immediate access to the outside zones. Alongside the swimming pool is an open air lounge territory, with TV and fireplace, and a wooden ceiling that ventures to every part of the length of the house. Multiple pendant lights define the dining area. Dedicated spot for playing pool just next to the dining room. fluid and tolerates a bit of rule-breaking.  A strong emphasis on line and form gives contemporary style its energy.    Less is more: smooth profiles instead of ornamentation, subtly patterned fabrics in lieu of colorful prints, minimal accessories  Contemporary design eschews rugs and carpeting in favor of sleeker, harder surfaces: bamboo; blond woods such as maple or ash; stone; ceramic.   geometric design or a textural weave    Cream, white, tan, beige, black abundant open space and light in mind, which makes them feel airy and expansive. Because there isn't any clutter, every piece has to count.  Ebonized planks or dark-stained concrete  One element in the house that is definitely impressive is the staircase. In the main restroom, there's a double sink vanity, and a tall window, it gets to be iced when required for privacy. Contemporary a la mode abreast airy angles au courant beige black bleached  blinds Boxy brown calming chic chrome clean clean lines clean paint contempo contrast cream current cutting edge digital art elegant ergonomic designs existent existing expansive extant flat screen  flowing lines fluid fresh functional glass glossy gray Gray leather high tech hot off presss in fashion in vogues instant inviting just out lacquer laid back large lighting fixtures latest leading-edge less is more linen livable minimal mod monochromatic light neutral new new things newfangleds no fuss not harsh now occuring open planes present present-day pull up shades pure ranch house real time restful same time sectional couches serene shiny silk silver sleek smooth some art some glass some metal space stark state-of-the-arts steel stylish tan taupe today trending trendy ultramoderns upbeat ups up-to-dates up-to-the-minute voguish white window treatments with it wood wood on the stairs"},
                {"style":"traditional", "description":    " The home has a post-Victorian and pre-Craftsman look  The original Douglas fir floors were merely refinished in the interior.  cabinets painted charcoal while adding a lighting feature. a grand piano. A lighter palette of creamy and golden yellows was used in the silk covered chairs and sectional eyes will be drawn to the grand piano here which no doubt is an important item in this living room with a Persian area rug. A lovely Victorian home exudes with style and grandeur The piano brings in some classic and classy feature in the space. The sofas are from Century Furniture with silk velvet body. A double-height living area looks really spacious! Traditional style was born in the colonial era and takes its decor cues from such a time. However, although structure and predictable order play a part, the traditional style is ultimately about comfort, warmth, and familiarity. Learn more about how to achieve a traditional style here. Often small, 1 to 1 1/2 one story Low- to medium-pitched hipped or gabled roof, Narrow, boxed eaves Windows may be single- or double-hung, often with two-over-two horizontal panes. Windows may wrap corners. Doors were often flat panels with small windows. Simple, built-in cabinetry. Wall cladding may be mixed according to local availability in clapboards, plain or raked shingle. Asbestos shingle  Brick veneer and stone are seen. Often seen with substantial chimneys  often the only cabinetry were the sink and a counter unit in the kitchen, possibly a bathroom closet, and a linen closet in the hall.  Timeless design, ornate detail, solid timber, hand painted kitchen. Hand scraped hardwood floor. Marble counter tops, traditional kitchen, crackle ceramic subway tile, farmhouse sink Traditional, Classic, Classic Grace, Dateless, Ageless, authentic  The result is a small house with few exotic decorative details. Traditional accustomed age-old ancestral authentic basic basket storage systems beige bronze chandelier chintz on furniture Classic Classy colonial Comfortable conventional copper Cosy Crafted cream cushions deep brown deep green deep red Dull durability Elegant Established Expected family family stuff farmhouse sinks fireplace fixed Grown up habitual Hardwood floors Harmonious. home Homely kitchen and dining room oriented pieces of furniture long-established pine marble countertops molding normal Nostalgic old older Old-fashioned Original Ornate orthodox over stuffed couches passed down furniture Pastiche pillows plain predictable raised panel cabinets Real Reassuring regular ritual routine Safe simple curtains smaller bedrooms patio furniture Sophisticated standard tan taupe time-honored Timeless Traditional Unimaginative Unsurprising usual wainscotting wallpaper Warm Welcoming wooden yellow"},
                {"style":"coastal", "description":    " relaxing, and positive. Nautical decor reflects the New England beach house spirit. This interior design style is based on white or sand colored foundation, with blue as the primary accent color. Your options are many: seashells in clear jars, jute ropes, rowing oars, sailboats, navigational maps, and more! The nautical decor and furniture creates an environment where everyday living evokes feelings of a tranquil seaside escape.   From New England to Morocco and every culture in between, there is a rich heritage that binds humans with this blue planet that has influenced our lifestyle. Nautical, Beachy Keen, Coastal, Cottage, Beachy Keen, Beach Style, Seashells, jute ropes, clear jars, sailboats, navigational maps Nautical decor reflects the color schemes of the shores, with application of blue, white, and sand hues. Introduce some seashells and ropes to accent furniture, plush microfiber upholstery. Material-wise, nautical decor combines linen upholstery for lounge seats  Coastal Nautical A lot of jute abyssal airey along coast American flags Anchors aquatic beach beach hut beachy beige Bleached floors bliss blue blues and greens boat breeze breezy bright bright colors bungalow Cape Cod carefree coastal coastline colorful cozy crabs crisp deep sea denim driftwood Fish floor pillows hamptons hydrographic informal Leathered wall shelves less expensive material light lighthouse littoral lobsters nautical design knick knacks marginal marine maritime marshy more windows than you expect nautical naval navigational neptune ocean oceangoing oceanic oceanographic of the sea on stilts open open windows pelagic refreshing riverine Rope Ropes saltwater salty sand sandy sea green sea shells seafaring seagoing seaside serene shore skirting skylight some wicker space squarish furniture stripey summer swell theme of the ocean tides twine very light furniture water waterfront weathered wet white wicker yellow"},
                {"style":"bohochic", "description":    " Bohemian decor captures the carefree and adventurous spirit of the avant-garde lifestyle. When furnishing, look for pieces that possess ethnic or nomadic vibes. Moroccan, Southwestern, or tribal-inspired designs are currently trending.  Bohemian furniture and decor taps your inner adventurous side.  The anthropological decor often features shabby fabric and textiles with rich artwork or patterns - especially those with red to purple shades.  Shabby chic decor emphasizes elements to recreate the antique flea market look.  Decor for shabby chic decor should be soft and opulent, often with an affected feel Bohemian, Shabby Chic The key is to carefully present a purposefully  messy  look.  Out of all the major interior design styles, it is the one with the most flair and room for creative expression.  The furniture are characterized by their aged appearance, with distressed composition to show signs of wear and tear. Generously introduce linen textiles for added style.  Though orthodox shabby chic colors are ecru and pastel, don't be afraid to apply some vibrant colors. Layer on textiles throws, pillows, rugs, tapestry   Pick up an oriental rug and pair it with upholstered chairs, shaggy throw pillows, and a hip French lamp. Invite the free Bohemian spirit to your home. Boho Chic Bohemian 70's flair abstract antistyle artist avant-garde beaded beads Beads as room dividers beat beatnik bohemian boss cluttered contrast demostrator dilettante drop out eccentric eclectic eclectic furniture extremist far out flower child flowery flowy free spirit freedom from convention gonzo groovy gypsy hip hippie iconoclast interesting wall designs knock knacks that are in odd shapes and figures kooky lantern pillows on the floor left field limited furniture lots of purples throw pillows Macrame maverick pieces mirrors misfit moroccan mural mirrors new hippie nifty nonconformist not much of a centerpiece oddball offbeat peacenik protester rad radical reflective scarves scatter rugs on the floor sensational seventies shabby chic strange tapestries tie-dye trendy vagabond velvet curtains Very bright colors weirdo whimsical witty writer"},
                {"style":"casual", "description":    " relaxed California style with timeless appeal. neutral color scheme, texture, and just a few table lamps  Draws on English and early-American furniture designs, as well as laid-back country, cottage, and farmhouse styles.  Weathered, low-maintenance furnishings are easy, inviting, and built for daily life.  Think golden retrievers, fuzzy slippers Plush upholstery, often slipcovered, with roll or boxed arms and skirts or ball feet. Indestructible tables with turned legs, trestles, or substantial pedestal bases. Warm wood tones with distressed finishes. from Shabby to Cottage spontaneous, impromptu, improvised, unplanned, unintentional, serendipitous, unexpected, fluky, uncalculated, nonchalant, relaxed  Shades of Yellow, Rose, Lavender, are always a good choice Flooring choices with casual decor can be a simple and straightforward as painting the concrete, using pine planking, wood-like laminate flooring,carpet. Shabby is a well loved casual decorating style interpretation Color palette is neutral with one accent color: tan/taupe, rosy pink and red Floors are neutral with a nubby textured rug to define the conversation area. shades of rosy pink on the walls sets the feminine tone for the room; trim is white Furniture is comfy and casual, with graceful legs on the white finished case goods and couch. Every piece is well scaled to the space. Notice the variety of finishes and shapes. Window treatments are a type of roman shade, but the fabric selection gives them a softness that is consistent with the room's Casual styling. Casual Preppy accidental adventitious aimless aloof big fluffy beds bookcases by chance comfortable contigent Couches country cottage look denim easygoing erratic fireplace fluky fortuitous friendly granite gray hardwood impromptu improvise impulsive incidental informal infrequent irregular leather lots of things on the wall modest neat no fear of getting dirty nonchalant non-traditional odd offhand photos pillows posters reading area Relaxed restored furniture scatter rugs sectional couch with TV serendipitous simple simple room designs sloppy spontaneous thoughtless unceremonious uncertain understated unforeseen unplanned Wood floors wood furniture spontaneous impromptu improvised unplanned unintentional serendipitous unexpected fluky uncalculated nonchalant relaxed"},
                {"style":"modern", "description":    " Urban interior design stems from the modern designer lofts in the major cities.  Larger furniture tends to be uniformly sleek with low-profile. Urban decor reflects the cosmopolitan preferences of the city dwellers.  For the living room, pair a minimalist coffee table with a Southwestern or Moroccan rug.  Gold or copper colored decor fits neatly in place.  Taking cues from its cosmopolitan environment, urban modern is a fusion of various opposing and complementary traits.  Minimalist modern, glamorous, ethnic heirlooms, and edgy experimental designs all collide in a distinctively 21st-century setting.  Feel free to bring home trailblazing modern furniture designs.  low seating. In the dining room, consider wooden dining table with gently sloped legs. The dining chairs should match with very basic tufting.  Modern advanced art work on the walls avant-garde clean coincident concomitant concurrent connected household contempo current current cutting edge cutting-edge dap dapper dashing designer furniture devices and gadgets each room with a unique style elegant exclusive faddish fresh futuristic glass glass tables high-tech innovative interesting mirrors Large glass light fixtures last word late latest latest thing latter-day leading-edge leather Metal minimalist mod modern modernistic modernized modish natty neoteric newfangled new-fashioned novel now pioneering Pottery-Barn present present-day prevailing prevalent queer designs recent recessed lighting revolutionary shades of silver and gray sharp smart solar panels stainless-steel state-of-the-art styled stylish swank today trachk lighting trendy twenty-first century Up-to-date up-to-the-minute visionary voguish wall art wired with-it"},
                {"style":"vintage", "description":    " 1 - 2 1/2 stories, Symmetrical Side-gabled or hipped, medium pitched roofs Boxed eaves with a moderate overhang. Dentil molding; frieze band beneath the cornice Decorative surrounds on doorways including pediments, sidelights, transoms Windows double hung sashes. Multiple lights upper and lower, or upper with a single pane below. Wide variety of window configurations including paired, triple, bayed or arched Balustrades on porch or portico side porches and sun rooms  Ornamental detail includes broken or unbroken pediments and side lights surrounding the entry.  Neoclassical, ornamental  Like the Colonial Revival, symmetrical with its entry centered and flanked by a balanced array of windows. Unlike the Early Classical Revival and Greek Revival houses of the 19th century, the Neoclassical houses may have a variety of detail and elaborations such as side extensions as well as paired, transom, or bay windows. Classical detailing at the eave with embellishments like modillions or dentil molding. The most notable architects of the day designed classically inspired buildings to house the many exhibits at the fair. Spectacularly, the buildings were lighted at night with strings of electric lights.  Though it was used for residences, Neoclassical Revival was more prominently used for public buildings and banks ... institutions where gravitas was expected. Vintage  Antique archetypal dining room table bronze cabbage roses canopies capital champion choice Classic classical colonial consummate definitive distinguished esthetic excellent exemplary family photos famous fine finest first-rate flawless floor rugs focussed on room and furniture historic ideal leather master masterly mature head posts mirrors nicely painted Old paradigmatic paramount perfect pillows preserved prime prototypal prototypical quality quilt quintessential quite areas ranking rare representative ripe ruffles Scattered antiques around select selected seventies Slay beds in the bedrooms smaller rooms standard superior time-honored top top-notch twenties typical usual venerable Victorian vintage"},
                {"style":"industrial", "description":    " This is a look that hearkens back to the industrial era. With a blend of exposed steel and rustic wood, industrial decor is one of my favorite design styles for its ability to achieve aesthetic balance. Industrial sofas and chairs often have leather finish.  Depending on your preference, industrial decor can err on the side of chic or rugged steampunk. Industrial furniture relies heavily on raw, unfinished wood.  Instead, I'd recommend something that is either faded or is generally dark gray, crimson red, burnt orange For pillows, throws and poufs, pick something that shows off its leather or woven texture.  Though ceiling lamps are typically overlooked in most homes, they form a critical component in industrial style decor. You can get a single statement piece or opt for a series of dimmer Edison bulbs.  Though the table can be constructed of all wood, it can also have exposed steel legs. A recent trend that is gaining popularity is the use of reinforced concrete. Industrial decor lighting often come in two categories: Old World-inspired lamps with frivolous ornamentation and details, or geometric designs with brushed or grainy steel. Very nice and timeless concrete tiles. Old tiles timeless concrete tiles are beautiful for every interior rugged, steampunk Leather, Raw wood, unfinished wood  faded, distressed, textured, woven brushed steel, grainy steel, edison bulbs includes copper-tone accents. In terms of general feel, industrial decor is often rustic and mature. Brown, Beige, Gray, Teal, Burnt Orange, Crimson red  It is simultaneously organic and engineered, bold and refined, masculine and feminine. Keep in mind that your chairs, and tables will likely be constructed of leather and raw wood, so you will naturally have plenty of brown or burnt orange.  Industrial abstruse automated big high ceilings big stoves and ranges big windows bolts bread-and-butter brick budgetary business carpeting throughout chandelier chrome wood metal furniture commercial Concrete floors dark wood ductwork echos exposed beams exposed brick exposed metal beams Exposed pipes factory-made fancy kitchen fiscal focal points in the room forged garage gears gray high ceilings high-tech humble materials in industry industrial industrialized iron Large Clocks leather loft glass metal metal pieces machine-made manufactured manufacturing material matte mechanical mechanized mercantile metal methodological monetary money-making occupational open spaces pecuniary pots and pans hanging from wires productive professional profitable profit-making raw remunerative restricted rolled steel salvage scholarly scientific silver smokestack solvent special specialized squarish furniture steel streamlined strength stripped-back technical technological trunks utilitarian very sparse in terms of furniture viable vocational warehouse welded Work"},
                {"style":"tropical", "description":    " Tropical style is evocative of the feeling of the islands - a lifestyle essential in relaxation, comfort, ease, and genuine hospitality. Tropical style is one of the world's most popular styles. When we say tropical, we think immediately of luxury, exotic beauty and hot summer days.  The main characteristic of tropical designed homes are tropical plants and flowers inside the house and outside in the garden or in the whole yard. Feel the tropical breeze while overlooking the ocean in a tropical home plan.  Tropical house plans do not have to be in the tropics Tropical decor is all about comfort and ease - it infuses the home with a relaxing, island-style vibe. Island homes are built for entertaining and living the indoor-outdoor lifestyle, which is why oversize porches, lanais, outdoor showers and breezy plantation shutters   Tropical home decor focuses on textures, natural materials and vibrant colors, coral, palm trees, rattan, wicker and bamboo shine in this decor.  Tropical style can be applied not only in the hot exotic places, but everywhere that you want. Decorating tropical home can be real enjoyment for everyone.  Tropical airy rooms balmy bamboo bleached floors bright bright colors Caribbean ceiling fans close coarse coral dense equatorial excessive Exotic extreme exuberant fertile flamingo flourishing focus on the outdoor fructiferous fruit grown high-growing hot humid island junglelike lahuala french doors potted plants lavish lots of blues and greens colors flowers and palms lush luxuriant marine mild moderate moist neon netting ocean sunny outdoor overabundant overgrown palm tree palm trees in the house palms patio or porch permanent vacation pleasant pleasure pool productive profuse prolific rampant refreshing rich semitropical small rooms smaller energy footprint steamy sticky stifling sultry summerlike summery sunny sweaty sweltering temperate torrid trees in the yard tropic tropical Vacation Vibrant vigorous wicker wild"},
                {"style":"lodge", "description":    " Rustic style is all about the natural beauty of things and a connection to the past. Interiors decorated in this style are simple, unpretentious, and warm.  Log construction or roughly finished, milled wood Hand-crafted details often with obvious design elements such as stone chimneys, shake roofs, handhewn logs, wrought iron or forged hardware. Sometimes incorporated peeled trunks and intersecting branches into pillars; used branches and twigs to create intricate railings. Natural materials such as local stone or timber often milled or worked onsite. Windows are often multi-paned casement Rustic style is more about materials and details than house type.  As with most architectural styles, by the time the  Great Camp  style trickled down to the middle class embraced by wealthy Gilded Age homeowners for some time. The rustic style was incorporated into the National Park System building projects during the 1920s and 30s, and remains the predominant style of some of the most beautiful public structures built, including Timberline Lodge on Mount Hood in Oregon and El Tovar Lodge in Grand Canyon National Park Low, horizontal profile. Shape may be a simple rectangle, L-shaped, or U-shaped and built around a courtyard Windows may be double hung or sliding. Sliding doors to deck or patio. plate picture windows are often prominent at front of house. Natural materials, minimal Rustic,  Countryside Think organic textures, weathered wood, and earth tones. The houses may be simple structures with just a single bedroom or multiple bunkrooms.  They may have a full bathroom, but often the earliest homes had no indoor plumbing at all.  They ranged in construction from single-story log cabins to two-story houses.  Bungalows Lodge abode alfresco auberge basic big fireplace big wood tables bivouac burrow cabin cabin camp campfire campground camping ground caravansary cedar chalet comfort couch country house darker rooms deer den dormitory dwelling encampment fireplace Fireplace fishing free garden gatehouse haunt healthful hilltop home hospice hostel hostelry hotel house Hunting hut in the woods informal inn invigorating couches stone fireplaces lean-to leather local artifacts lodge log cabin log cabin furniture log furniture Logs motel mountain natural nature-loving areas out of the house out-of-doors outside over stuffed couches overstuffed couches patio picnic plaid plaids public house retreat roadhouse rocks rugs rustic shack shanty shed shelter smoke stone stopover summer home tavern tent tent city tepee tilt Tons of wood unrestricted villa wigwam wood burning stove woods woodsy yard pictures"},
                {"style":"geometric", "description":    " geometric volumes, shapes and lines but some homes stand out because of their outstanding designs. urban design  Stucco and hardie panels were used for the home's exterior  combines several geometric shapes for the exterior. It also make use of assorted materials to create varying textures. Two parallel blocks of the house were joined together with a enclosed bridge making it look lovely in its straight lines and edges. The combination of rectangles in this house is amazing. The addition of a rectangular pool even made it look more mesmerizing! spot the geometric lines and shapes in it including the square pool on the corner. A rock facade and black finish give this house a masculine look especially with the geometric shapes and lines in it. On one side, you would think that this is just a small triangular house but once you get to the side A squared box home design with walls and materials. Even the windows were square-ish in shape. Looking bold and strong with its geometric features, this house is an excellent design with touches of nature You can see triangles on the roof of this house setting it apart from other home designs. geometric lines. Geometric Architecture argyle block tables bold colors circles computative congruous decorated with regular lines and shapes. Functional Figures geometrical graphic octagons mathematical measurable sculptures moroccan mosaic Octagonal tables organized pattern polygon shapes sparse spatial square square furniture squares structural style over function symmetrical triangular wall pieces"},
                {"style":"floral", "description":    " bedroom with flowers and floral patterns. you can make it look like Spring all year round by adding fresh flowers as well as items with floral patterns It could be a furniture with flowers, a carpet, a wallpaper a vase of fresh flowers would always be awesome! So, here are some living rooms that are blossoming with florals! If you use florals, keep the rest of the decor muted so that the florals will be highlighted You can add a few furniture with floral prints as well as fresh flowers to your living room. Splendid blues and calm tones are reflected in this living room with floral chairs and an arabesque rug. Look at the flowers in this living room from the wall decors, pillows, area rug and others. Sweet pink flowers are seen in the patterns of this living room. floral prints are used here but they look good together. The floral printed seating brought blossoms to this living room A Bohemian living room with florals everywhere as well as flower wall decors too. Aside from the floral curtains, this one has a bunch of flowers as a centerpiece. A floor-level seating with floral prints floral prints are bold combined purple flowers and stripes. Such a stunning space that is relaxing and serene. It has flower prints on the chairs as well as on the throw pillows. living room looks neat and lovely with a floral are rug that made this appear very interesting. Floral floral patterns blooming blossoming blossomy botanic bouquet bright cabbage roses chintz Chintzy material clean couches dendritic efflorescent flora floras flower flower-patterned Flowers flowery focus on main entryway and dining room fragrant fresh flowers grass herbaceous light colors matching dishes and plate sets mint green nature pink plant pot pourrie scalloped floral curtains seasonal spring summer sweet sylvan vase verdant floors Wreaths"},
                {"style":"insignia", "description":    " Typography, Personalization, Monogram home decors can be a good way for self-expression especially if you do it with letters or type. Cut letters from a magazine, arrange them creatively, have it enlarged after being photocopied. Paper mache letters painted Cut letters from old maps or patterned paper to create decor pieces Pop-up letters could look really nice as a poster in your wall. add stain, place vinyl letters, paint over it, remove the letters and voila! Made from fabric place mats and iron on letters, you can place a banner on your walls  Sketch the letters on the wall and put thumbtacks  Paper quilling is indeed fun! You can make many letters if you want to  Insignia Typography, Personalization  Monogram adumbration arms arrows attribute badge banner blazonry brand character coat coat of arms Coat of arms colophon comic book heroes crest custom things decoration design device earmark emblazonry emblem ensign escutcheon family symbols fancy cars figure flag font hallmark heraldry identification image impress initials insignia Label Letter logo mark marker matching his and hers towels medal memento Military insignia miniature monogram motto Name brand furniture names numbers paraphernalia parts of the service pennant personalize Pottery Barn Ralph Lauren regalia reminder representation Restoration Hardware scepter seal shield sign signet signs skull and cross bones slogan sororities standard symbol token trademark type Paper quilling Paper mache Patterned Paper thumbtacks Iron-on letters"}
            ]
    results = '<table border="1"><tr><td>Expected</td><td>Text</td><td>Keywords used</td><td>Tested</td><td>Result</td></tr>'
    idx = 0
    for data in corpus:
        resp = find_keywords_test( data['description'])
        print(resp)
        '''results += '<tr><td>'+data['style']+'</td><td>'+data['text']+'</td><td>'+str(resp[0])+'</td><td>'+str(resp[1])+'</td>'
        if(data['style'] == resp):
            results += '<td>Pass</td>'
        else:
            results += '<td>Fail</td>'    
        '</tr>'
        '''
        idx+=1
    results +='</table>'
    return HttpResponse(results)

def find_keywords_test(sentence):
    import nltk
    from pymongo import MongoClient
    text = nltk.word_tokenize(sentence)
    print(nltk.pos_tag(text))
    noise = []
    keyWd =[]
    allkeys = []
    db = MongoClient("10.0.2.101",27017)['bb_beyond']
    url = 'http://conceptnet5.media.mit.edu/data/5.4/search?limit=10&rel=/r/Synonym&end=/c/en/'
    headers = {'content-type': 'application/json'}
    for pS in nltk.pos_tag(text):
        keys = []
        if(pS[1] =='NN' or pS[1] == 'NNP' or pS[1] == 'NNS' or pS[1] == 'JJ'):
            keys.append(pS[0])
            prodList = []
            url1 = url+ pS[0]
            resp = requests.request("GET", url1, data={}, headers=headers)
            concepts = resp.json()['edges']
            for concept in concepts:
                if(concept['dataset'].endswith('en')):
                    print('synonym of %s is %s' % (pS[0],concept['surfaceStart'].encode('utf-8')))
                    keys.append(concept['surfaceStart'])
            cursor = db['styles'].find({"$text":{"$search":' '.join(keys)}})
            index = 0
            count = cursor.count()
            if(count >0):
                noise.append({"keyword":pS[0],"style":count})
            while index != count:
                doc = cursor[index]
                prodList.append(doc['style'])
                keyWd.append({"keyword":pS[0],"style":doc['style']})
                
                index+=1
            cursor.close()
            allkeys.extend(keys)
    #print(json.dumps(noise))
    print(allkeys)
    print(keyWd)
    from collections import Counter
    c1 = Counter(keyword['keyword'] for keyword in keyWd )
    print('keywords per category: %s' % c1)
    kw1 = [k for k, v in c1.iteritems() if (v >3) ]
    print('new kw: %s' % kw1)
    with open('kwd.txt','ab') as f:
        f.write(', '.join(kw1))
        f.write('\n')
    keyWd1 = []
    idx=0
    while(idx < len(keyWd)):
        if(keyWd[idx]['keyword'] in kw1):
            keyWd1.append({"keyword":keyWd[idx]['keyword'],"style":keyWd[idx]['style']})
        idx+=1     
    print('new keywd1: %s' % keyWd1)
    c = Counter(style['style'] for style in keyWd1)
    print('count per category: %s' % c)
    arr = [(k,v) for k, v in c.iteritems() ]
    print(arr)
    return [[],[]]

def try_text(sentence):
    from sklearn.feature_extraction.text import CountVectorizer
    noise = ['the','and','an','with','for','is','to','in','it','or','from','while','also','of','than','more','a','these','they','them']
    vectorizer = CountVectorizer(max_df=8,stop_words=noise,ngram_range=(1,3))
    corpus = [
                'a la mode,abreast,airy,angles,au courant,beige,black,bleached ,blinds,Boxy,brown,calming,chic,chrome,clean,clean lines,clean paint,contempo,contrast,cream,current,cutting edge,decorative ,digital art,elegant,ergonomic designs,existent,existing,expansive,extant,flat screen ,flowing lines,fluid,fresh,functional,glass,glossy,gray,Gray leather,high tech,hot off presss,in fashion,in vogues,instant,inviting,just out,lacquer,laid back,large lighting fixtures,latest,leading-edge,less is more,linen,lines,livable,minimal,mod,modern,monochromatic,natural light,neutral,new,new things,newfangleds,no fuss,not harsh,now,occuring,open,planes,present,present-day,pull up shades,pure,ranch house,real time,recent,red-hots,restful,same time,sectional couches,serene,shiny,silk,silver,simple,sleek,smooth,some art,some glass,some metal,space,Square,stark,state-of-the-arts,steel,stylish,tan,taupe,tile,today,trending,trendy,ultramoderns,upbeat,ups,up-to-dates,up-to-the-minute,voguish,white,window treatments,with it,wood,wood on the stairs',
                'accustomed,age-old,ancestral,authentic,basic,basket storage systems,beige,blue,bronze,chandelier,chintz on furniture,Classic,Classy,colonial,Comfortable,conventional,copper,Cosy,Crafted,cream,cushions,deep brown,deep green,deep red,Dull,durability,Elegant,Established,Expected,family,family stuff,farmhouse sinks,fireplace,fixed,Grown up,habitual,Hardwood floors,Harmonious.,home,Homely,kitchen and dining room oriented,large pieces of furniture,long-established,Lots of pine,marble countertops,molding,neutral,normal,Nostalgic,old,older,Old-fashioned,Original,Ornate,orthodox,over stuffed couches,passed down furniture,Pastiche,pillows,plain,predictable,raised panel cabinets,Real,Reassuring,regular,ritual,routine,Safe,simple curtains,smaller bedrooms,soft edges,patio furniture,Sophisticated,standard,tan,taupe,time-honored,Timeless,Traditional,Unimaginative,Unsurprising,usual,wainscotting,wallpaper,Warm,Welcoming,wood,wooden,yellow,',
                'A lot of jute,abyssal,airey,along coast,American flags,Anchors,aquatic,beach,beach hut,beachy,beige,Bleached floors,bliss,blue,blues and greens,boat,breeze,breezy,bright,bright colors,bungalow,Cape Cod,carefree,coastal,coastline,colorful,cozy,crabs,crisp,deep sea,denim,driftwood,Fish,floor pillows,hamptons,hydrographic,informal,Leathered wall shelves,less expensive material,light,lighthouse,littoral,lobsters,lots of nautical design knick knacks,marginal,marine,maritime,marshy,more windows than you expect,natural,nautical,naval,navigational,neptune,no big gadgets,ocean,oceangoing,oceanic,oceanographic,of the sea,on stilts,open,open windows,pelagic,refreshing,riverine,Rope mirrors,Ropes,saltwater,salty,sand,sandy,sea green,sea shells,seafaring,seagoing,seaside,serene,shore,skirting,skylight,some wicker,space,squarish modern furniture,stripey,summer,swell,theme of the ocean,tides,twine,very light furniture,water,waterfront,weathered,wet,white,wicker,yellow',
                '70s flair,abstract,antistyle,artist,avant-garde,beaded,beads,Beads as room dividers,beat,beatnik,bohemian,boss,cluttered,contrast,demostrator,dilettante,drop out,eccentric,eclectic,eclectic furniture,extremist,far out,flower child,flowery,flowy,free spirit,freedom from convention,gonzo,groovy,gypsy,hip,hippie,iconoclast,interesting wall designs,knock knacks that are in odd shapes and figures,kooky,lantern,large pillows on the floor,left field,limited furniture,lots of purples,lots of throw pillows,Macrame,maverick,metal pieces,mirrors,misfit,moroccan,mural mirrors,new hippie,nifty,nonconformist,not much of a centerpiece,oddball,offbeat,peacenik,protester,rad,radical,reflective,scarves,scatter rugs on the floor,sensational,seventies,shabby chic,strange,tapestries,tie-dye,trendy,vagabond,velvet curtains,Very bright colors,weirdo,whimsical,witty,writer',
                'accidental,adventitious,aimless,aloof,art work,big fluffy beds,bookcases,by chance,comfortable,contigent,Couches,country cottage look,denim,easygoing,erratic,fireplace,fluky,fortuitous,friendly,glass,granite,gray,hardwood,impromptu,improvise,impulsive,incidental,informal,infrequent,irregular,Large wall art,leather,lots of things on the wall,modest,neat,no fear of getting dirty,nonchalant,non-traditional,odd,offhand,photos,pillows,posters,reading area,Relaxed,restored furniture,scatter rugs,sectional couch with TV,serendipitous,simple,simple room designs,sloppy,sofa,spontaneous,thoughtless,unceremonious,uncertain,understated,unforeseen,unplanned,Wood floors,wood furniture,spontaneous,impromptu,improvised,unplanned,unintentional,serendipitous,unexpected,fluky,uncalculated,nonchalant,relaxed,',
                'advanced,art work on the walls,avant-garde,chic,chichi,clean,coincident,concomitant,concurrent,connected household,contempo,current,current,cutting edge,cutting-edge,dap,dapper,dashing,designer furniture,devices and gadgets,each room with a unique style,elegant,exclusive,faddish,fresh,futuristic,glass,glass tables,high-tech,innovative,interesting mirrors,Large glass light fixtures,last word,late,latest,latest thing,latter-day,leading-edge,leather,Metal,minimalist,mod,modern,modernistic,modernized,modish,natty,neoteric,newfangled,new-fashioned,novel,now,pioneering,Pottery-Barn,present,present-day,prevailing,prevalent,queer designs,recent,recessed lighting,revolutionary,shades of silver and gray,sharp,Similar to contemporary,smart,sofa pits,solar panels,stainless-steel,state-of-the-art,styled,stylish,swank,today,trachk lighting,trendy,twenty- first century,Up-to-date,up-to-the-minute,visionary,voguish,wall art,wired,with-it',
                'Antique,archetypal,best,big wood dining room table,brick,bronze,cabbage roses,canopies,capital,champion,choice,Classic,classical,colonial,consummate,definitive,distinguished,esthetic,excellent,exemplary,exposed beams,exposed brick,family photos,famous,fine,finest,first-rate,flawless,floor rugs,focussed on room and furniture,gray,historic,ideal,leather,light wood,master,masterly,mature,metal head posts,mirrors,nicely painted,Old,paradigmatic,paramount,perfect,pillows,preserved,prime,prototypal,prototypical,quality,quilt,quintessential,quite areas,ranking,rare,representative,ripe,ruffles,Scattered antiques around,select,selected,seventies,simple,Slay beds in the bedrooms,smaller rooms,standard,superior,time-honored,top,top-notch,twenties,typical,usual,venerable,Victorian,Victorian sofas,vintage,well-known,white,wine,Wood,Wood floors,',
                'abstruse,automated,big high ceilings,big stoves and ranges,big windows,bolts,bread-and-butter,brick,budgetary,business,carpeting throughout,chandelier,chrome,combination of wood an metal furniture,commercial,Concrete floors,dark wood,ductwork,echos,exposed beams,exposed brick,exposed metal beams,Exposed pipes,factory-made,fancy kitchen,fiscal,focal points in the room,forged,garage,gears,gray,high ceilings,high-tech,humble materials,in industry,industrial,industrialized,iron,Large Clocks,large paintings,leather,loft,lots of glass,Lots of metal,Lots of metal pieces,machine-made,manufactured,manufacturing,material,matte,mechanical,mechanized,mercantile,metal,methodological,modern,monetary,money-making,occupational,open spaces,pecuniary,pots and pans hanging from wires,productive,professional,profitable,profit-making,raw,remunerative,restricted,rolled steel,salvage,scholarly,scientific,silver,smokestack,solvent,special,specialized,squarish furniture,steel,streamlined,strength,stripped-back,technical,technological,trunks,utilitarian,very sparse in terms of furniture,viable,vocational,warehouse,welded,Work,',
                'airy rooms,balmy,bamboo,bleached floors,bright,bright colors,Caribbean,ceiling fans,close,coarse,coral,dense,equatorial,excessive,Exotic,extreme,exuberant,fertile,flamingo,flourishing,focus on the outdoor,fructiferous,fruit,grown,high-growing,hot,humid,island,junglelike,lahuala,large french doors,large potted plants,lavish,lots of blues and greens,lots of colors,Lots of flowers and palms,lush,luxuriant,marine,mild,moderate,moist,neon,netting,ocean,open and sunny,Open floor plan,outdoor,overabundant,overgrown,palm tree,palm trees in the house,palms,patio or porch,permanent vacation,pleasant,pleasure,pool,productive,profuse,prolific,rampant,refreshing,rich,semitropical,small rooms,smaller energy footprint,steamy,sticky,stifling,sultry,summerlike,summery,sunny,sweaty,sweltering,temperate,torrid,trees in the yard,tropic,tropical,Vacation,Vibrant,vigorous,warm,wicker,wild,',
                'abode,alfresco,auberge,basic,big fireplace,big wood tables,bivouac,burrow,cabin,cabin,camp,campfire,campground,camping ground,caravansary,casual,cedar,chalet,comfort,cottage,couch,country house,darker rooms,deer,den,dormitory,dwelling,encampment,fireplace,Fireplace,fishing,free,garden,gatehouse,haunt,healthful,hilltop,home,hospice,hostel,hostelry,hotel,house,Hunting,hut,in the open,in the woods,informal,inn,invigorating,large couches,large stone fireplaces,lean-to,leather,local artifacts,lodge,log cabin,log cabin furniture,log furniture,Logs,motel,mountain,natural,nature-loving,open areas,out of the house,out-of-doors,outside,over stuffed couches,overstuffed couches,patio,picnic,plaid,plaids,public house,retreat,roadhouse,rocks,rugs,rustic,shack,shanty,shed,shelter,smoke,stone,stopover,summer home,tavern,tent,tent city,tepee,tilt,Tons of wood,unrestricted,villa,wigwam,wood burning stove,woods,woodsy,yard,',
                'Architecture,argyle,block tables,bold colors,circles,computative,congruous,decorated with regular lines and shapes.,Functional,Figures,geometrical,graphic,Lots of blues,lots of octagons,mathematical,measurable,metal sculptures,moroccan,mosaic,Octagonal tables,organized,pattern,polygon,shapes,sparse,spatial,square,square furniture,squares,structural,style over function,symmetrical,tile,triangular wall pieces',
                'Big floral patterns,blooming,blossoming,blossomy,botanic,bouquet,bright,bright colors,cabbage roses,chintz,Chintzy material,clean,couches,decorative,dendritic,efflorescent,flora,floras,flower,flower-patterned,Flowers,flowery,focus on main entryway and dining room,fragrant,fresh flowers,grass,herbaceous,light colors,matching dishes and plate sets,mint green,nature,pink,plant,pot pourrie,scalloped floral curtains,seasonal,spring,summer,sweet,sylvan,vase,verdant,white,wood floors,Wreaths,',
                'adumbration,arms,arrows,attribute,badge,banner,blazonry,brand,character,coat,coat of arms,Coat of arms,colophon,colors,comic book heroes,crest,custom things,decoration,design,device,earmark,emblazonry,emblem,ensign,escutcheon,family symbols,fancy cars,figure,flag,font,hallmark,heraldry,identification,image,impress,initials,insignia,Label,Letter,logo,mark,marker,matching his and hers towels,medal,memento,Military insignia,miniature,monogram,motto,Name brand designer furniture,names,numbers,paraphernalia,parts of the service,pennant,personalize,Pottery Barn,Ralph Lauren,regalia,reminder,representation,Restoration Hardware,scepter,seal,shield,sign,signet,signs,skull and cross bones,slogan,sororities,standard,symbol,token,trademark,type,Paper quilling,Paper mache,Patterned Paper,thumbtacks,Iron-on letters,'
                ]
    corpusText = [
                'Less is more: smooth profiles instead of ornamentation, solid or subtly patterned fabrics in lieu of colorful prints, minimal accessories rather than big collections.', 
                'These rooms are designed with abundant open space and natural light in mind, which makes them feel airy and expansive. Because there isnt any clutter, every piece has to count.',
                'soft pieces, rounded lines, tone on tone color pallettes, Brown, Taupe, Cream, pure white, natural fabric, silk, wool, linens,',
                'Gray colors, bleached floors, large lighting fixtures, some metal, some glass, pull up shades, blinds in light colors',
                'Ceilings secured in wood and the vast glass entryways open for immediate access to the outside zones,Sheer white curtains, lounge area'
                ]
    X = vectorizer.fit_transform(corpus)
    analyze = vectorizer.build_analyzer()
    print(X.toarray())
    print('dim row: %s, col: %s' % (len(X.toarray()),len(X.toarray()[0])))
    X = vectorizer.fit_transform(corpusText)
    print('dim row: %s, col: %s' % (len(X.toarray()),len(X.toarray()[0])))
    print(vectorizer.get_feature_names())
    from sklearn.feature_extraction.text import TfidfTransformer
    transformer = TfidfTransformer(smooth_idf=False)
    tfidf = transformer.fit_transform(X.toarray())
    print(tfidf.toarray())
    from sklearn.feature_extraction.text import TfidfVectorizer
    vectorizer = TfidfVectorizer(min_df=1)
    Y = vectorizer.fit_transform(corpus)
    print(Y.toarray())
    f = open("data.txt", "w")
    f.write("\n".join([",".join([str(n) for n in item]) for item in Y.toarray()]))
    f.close()
    print('dim row: %s, col: %s' % (len(Y.toarray()),len(Y.toarray()[0])))

def test_styles(sentence):
    import nltk
    from pymongo import MongoClient
    text = nltk.word_tokenize(sentence)
    print(nltk.pos_tag(text))
    from sklearn.feature_extraction.text import CountVectorizer
    noise = ['the','and','an','with','for','is','to','in','it','or','from','while','also','of','than','more','are','a','these','they','them']
    vectorizer = CountVectorizer(max_df=8,stop_words=noise,ngram_range=(1,3))
    corpus = [
              'Contemporary, la mode, angles, au courant, bleached , blinds, chic, chrome, contempo, Contemporary, contrast, cream, current, cutting edge, decorative , digital art, elegant, ergonomic designs, existent, existing, expansive, extant, flat screen , flowing lines, fluid, fresh, functional, glass, glossy, gray, Gray leather, high tech, hot off press, fashion, vogue, instant, just out, lacquer, large lighting fixtures, latest, leading-edge, less more, linen, lines, livable, minimal, mod, modern, monochromatic, neutral, new, new things, newfangleds, no fuss, not harsh, now, occuring, open, planes, present, present-day, pull up shades, pure, ranch house, real time, recent, red-hots, restful, same time, sectional, serene, shiny, silk, silver, simple, sleek, smooth, some art, some glass, some metal, space, Square, stark, state-of-arts, steel, stylish, tan, taupe, today, trending, trendy, ultra modern, upbeat, ups, up-to-date, up-to-the-minute, voguish, window treatments, with it, features large backyard, swimming pool, outdoor kitchen dining area, well an outdoor lounge. featuring two volumes separated by outdoor lounge, main one, where living area, kitchen master suite are side one, with suites for visiting guests. stone covered outdoor areas are outlined with hidden lighting which looks really stunning. swimming pool stepped down slightly from house, lighting hidden within steps create very nice atmosphere at night. rooftop patio take advantage views area. Pool area has simple design with rectangular squar-ish pavers around it. impressive feature house this tree it. small section floor, ceiling roof was removed allow tree grow through it. Inside home, ceiling secured wood vast glass entryways open for immediate access outside zones. Alongside swimming pool an open air lounge territory, with TV fireplace, wooden ceiling that ventures every part length house. Multiple pendant lights define dining area. simple floating sideboard that rests under highlighted piece art. Just off dining room an outdoor kitchen large dining area that perfect for entertaining. Dedicated spot for playing pool just next dining room. takes advantage views outdoor lifestyle. fluid tolerates bit rule-breaking. strong emphasis on line form gives contemporary style its energy. Less more smooth profiles instead ornamentation, solid subtly patterned fabrics lieu colorful prints, minimal accessories rather than big collections. Contemporary design eschews rugs carpeting favor sleeker, harder surfaces: bamboo; blond woods such maple ash; stone; ceramic. geometric design textural weave Cream, white, tan, beige, black These rooms are designed with abundant open space natural light mind, which makes them feel airy expansive. Because there isnt any clutter, every piece has count. Ebonized planks dark-stained concrete can ground contemporary rooms. One element house that definitely impressive staircase. stairs handrail are actually made from wood. There also lighting that wraps its way up stairs, hidden between stairs handrail. master bedroom has long sheer white curtains it. also has its own lounge area. also has doors all around that open up private balcony. interior design bedroom also very stunning making you feel like you are hotel upper level house, there are bedrooms like this one, that has white walls with soft lighting hidden behind custom-built headboard that runs length room different textures used space ensuite bathroom, there. s vanity with solitary sink, walk-in shower with bunches light from skylight. main restroom, double sink vanity, tall window, gets be iced when required for privacy.',
              'Traditional, accustomed, age-old, ancestral, authentic, basket storage systems, bronze, chandelier, chintz on furniture, Classic, Classy, colonial, Comfortable, conventional, copper, Cosy, Crafted, cream, cushions, Dull, durability, Durable, Elegant, Established, Expected, family, family stuff, farmhouse sinks, fireplace, fixed, Grown up, habitual, Hardwood floors, Harmonious, home, Homely, kitchen dining room oriented, large pieces furniture, long-established, marble countertops, molding, neutral, normal, Nostalgic, old, older, Old-fashioned, Original, orthodox, over stuffed couches, passed down furniture, Pastiche, patio furniture, plain, predictable, raised panel cabinets, Reassuring, regular, ritual, routine, Safe, simple curtains, smaller bedrooms, soft edges, Sophisticated, standard, tan, taupe, time-honored, Timeless, Traditional, Unimaginative, Unsurprising, usual, wainscoting, Warm, Welcoming, wicker, yellow, home renovation 1950s cottage getting major update fit needs family. home has post-Victorian pre-Craftsman look original Douglas fir floors were merely refinished interior. once white cabinets were painted charcoal gray while adding vintage lighting feature. traditional living rooms that you will see today have one thing common: they highlight grand piano. lighter palette creamy whites golden yellows was used silk covered chairs contemporary white sofa Artwork was selection used from private collection owners, defines designer. eyes will be drawn grand piano here which no doubt an important item this living room with Persian area rug. large boxed-out bay window anticipation accommodating baby grand piano. combination black, white, yellow this living room lovely Victorian home exudes with style grandeur This traditional living room also has that cottage shabby chic feel. piano brings some classic classy feature space. sofas are from Century Furniture with silk velvet body. double-height living area looks really spacious! Traditional style was born colonial era takes its decor cues from such time. However, although structure predictable order play part, traditional style ultimately about comfort, warmth, familiarity. Learn more about how achieve traditional style here. Often small, one storey Low- medium-pitched hipped gabled roof, Narrow, boxed eaves Windows may be single double-hung, often with two-over-two horizontal panes. Windows may wrap corners. Doors were often flat panels with small glass windows. Simple, built-in cabinetry. Wall cladding may be mixed according local availability including wood clapboards, plain raked shingle. Asbestos shingle not uncommon. Brick veneer stone are seen. Often seen with substantial chimneys Small, covered front porch Little any ornamentation Garages were usually separate, but occasionally were integrated attached by breezeway house. Not dominant, usually set back. One most ubiquitous house styles Minimal Traditional. more ornamented, distinctive styles 1920s such English Revival Spanish Eclectic were stripped all unnecessary details. These small homes replaced craftsman-style bungalows previous decade, which by early 1930s were considered out date hopelessly old-fashioned. Rather than small houses, cheaply built inferior materials, Minimal Traditional was usually constructed same quality materials larger, more expensive homes. Where they differed was number built-ins interior finishes. average size was about 800 square feet often only cabinetry were sink counter unit kitchen, possibly bathroom closet, linen closet hall. Timeless design, ornate detail, solid timber, hand painted kitchen. Hand scraped hardwood floor. Marble counter tops, traditional kitchen, crackle ceramic subway tile, farmhouse sink Traditional, Classic, Classic Grace, Dateless, Ageless, authentic result small house with few exotic decorative details. ',
              'Coastal , abyssal, airy, along coast, American flags, Anchors, aquatic, basket, baskets, beach, beach hut, beachy, Bleached floors, bliss, blissful, blue, blues greens, boat, bottles, breeze, breezy, bungalow, buoy, Cape Cod, carefree, Coast, coastal, coastline, colorful, conch, coral, corals, cozy, crabs, crisp, crisp air, deep sea, denim, driftwood, Fish, floor pillows, gingerbread, Green, hamptons, Hydrangea, hydrographic, informal, Jingdezhen, Jingdezhen ware, Jute, less expensive material, lifebuoy, lifebuoys, light, lighthouse, littoral, lobsters, marine, maritime, marshy, Marthas vineyard, Nantucket, nautical, naval, navigational, netting, ocean, oceangoing, oceanic, oceanographic, open, pelagic, porcelain, pottery, Qing, refreshing, riverine, Rope mirrors, Ropes, saltwater, salty, sand, sandy, sea, sea green, sea shells, seafaring, seagoing, seahorse, seaside, serene, shells, ship, ships, shore, skirting, skylight, some wicker, space, starfish, stilts, stripey, stripey, summer, Sunny, swell, theme ocean, tides, turquoise, turtle, turtles, twine, very light furniture, water, waterfront, weathered, wet, White, wicker, yellowWarm, relaxing, positive. Nautical decor reflects New England beach house spirit. This interior design style based on white sand colored foundation, with blue primary accent color. Your options for decorative accents are many: seashells clear jars, jute ropes, rowing oars, sailboats, navigational maps, more! nautical decor furniture design brings together rustic chic elements, creating an environment where everyday living evokes feelings tranquil seaside escape. From New England Morocco every culture between, there rich heritage that binds humans with this blue planet that has influenced our lifestyle. Nautical, Beachy Keen, Coastal, Cottage, Beachy Keen, Beach Style, Seashells, jute ropes, clear jars, sailboats, navigational mapsNautical decor reflects color schemes shores, with common application blue, white, sand hues. Introduce some seashells ropes accent rustic wood table plush microfiber sofa. Material-wise, nautical decor incorporates unfinished wood its tables chairs, combined with chic linen upholstery for your lounge seats sofas. ',
              'Boho Chic, 70s flair, abstract, adventures, antistyle, artist, artsy, aura, avant-garde, beaded, beads, beat, beatnik, blanket, bohemian, cluttered, contrasting, dilettante, distressed brick, dramatic, eccentric, eclectic, eclectic furniture, extremist, faux fur, free spirit, freedom , Fuchsia, gaudy, gonzo, groovy, guitar, gypsy, haphazard, hip, hippie, hot pink, iconoclast, kooky, lantern, large pillows on floor, left field, limited furniture, lots purples, lots throw pillows, low seating, Macrame, maverick, mirrors, misfit, moroccan, Morrocan, mural mirrors, native, native american, hippie, nifty, nonconformist, not much centerpiece, oddball, offbeat, peacenik, pink, playful, pouf, protester, purple, rad, radical, red, reflective, room dividers, scarves, scatter rugs on floor, sensational, seventies, shabby chic, silk, strange, tapestries, terrariums, throw-back, tie-dye, trendy, twinkle light, unconventional, vagabond, velvet, velvet curtains, vibe, wall decal, weirdo, whimsical, witty, World traveller, writerBohemian decor captures carefree adventurous spirit avant-garde lifestyle. When furnishing, look for pieces that possess ethnic nomadic vibes. Moroccan, Southwestern, tribal-inspired designs are currently trending. Bohemian furniture decor taps your inner adventurous side. anthropological decor often features shabby fabric textiles with rich artwork patterns especially those with red purple shades. Shabby chic decor emphasizes vintage elements recreate antique flea market look. Decorative accents for shabby chic decor should be soft opulent, often with an affected feel, order bring overall interior design contemporary standard. Bohemian, Shabby Chic key carefully present purposefully messy look. features creative application rich patterns vibrant colors, especially those with red purple tones. Composition-wise, boho chic loves textile, wood, animal hide, metallic accents. Out all major interior design styles, one with most flair room for creative expression. Boho design loves upholstered furniture rustic wood pieces, purposefully untouched create an antiquated visual. furniture are characterized by their aged appearance, with distressed wood composition covered sanded milk paint show signs wear tear. Generously introduce linen textiles for added style. Though orthodox shabby chic colors are white, ecru pastel, dont be afraid apply some vibrant colors. Layer on textiles (throws, pillows, rugs, tapestry) for warm ambience. Pick up an oriental rug pair with traditional upholstered sofa, shaggy throw pillows, hip French lamp. Invite warm, free Bohemian spirit your home. ',
              'Casual , adventitious, aimless, aloof, art work, basic, bookcases, chance, comfortable, contingent, couch , Couches, country cottage , denim, easygoing, erratic, fireplace, fluffy beds, fluky, fortuitous, friendly, glass, impromptu, improvise, improvised, impulsive, incidental, informal, inviting, irregular, laid back, Large TV, Large wall art, lots things on wall, modest, neat, no fear getting dirty, nonchalant, non-traditional, odd, offhand, photos, pillows, posters, reading area, Relaxed, restored furniture, scatter rugs, sectional , serendipitous, simple, sloppy, sofa, spontaneous, Television, thoughtless, uncalculated, unceremonious, uncertain, understated, unexpected, unforeseen, unintentional, unplannedRooms that have relaxed California style with timeless appeal. neutral color scheme, lots texture, just few table lamps Draws on English early-American furniture designs, well laid-back country, cottage, farmhouse styles. Weathered, low-maintenance furnishings are easy, inviting, built for daily life. Think golden retrievers, fuzzy slippersPlush upholstery, often slipcovered, with roll square arms skirts ball feet. Indestructible tables with turned legs, trestles, substantial pedestal bases. Warm wood tones with rustic distressed finishes. Natural fabrics, like cotton wool. Solid textiles, simple stripes, unfussy florals muted colors. from Shabby Chic Cottage affordable home decorating ideas spontaneous, impromptu, improvised, unplanned, unintentional, serendipitous, unexpected, fluky, uncalculated, nonchalant, relaxed Shades Blue, Green, Yellow, Rose, Lavender, many moods white are always good choice Flooring choices with casual decor can be simple straightforward painting concrete, using pine planking, wood-like laminate flooring, tile carpet. Shabby Chic well loved casual decorating style interpretation Color palette neutral with one accent color: white, tan/taupe, soft rosy pink red Floors are neutral with nubby textured rug define conversation area. soft, soft shade rosy pink on walls sets feminine tone for room; trim white Furniture comfy casual, with graceful legs on white finished case goods clean lines on sofa. Every piece well scaled space. Notice variety finishes shapes. Window treatments are type roman shade, but fabric selection gives them softness that consistent with rooms Casual styling. I really like height shelf displaying plate collection; allows for photographs be displayed along with some other accessories on console table without area feeling too busy. Baskets on floor near fire place under coffee table add color texture so room doesnt get that washed out look.',
              'Modern, advanced, AI, Artificial Intelligence, artwork , avant-garde, Balanced, Bold Colors, chic, clean, concurrent, contempo, current, cutting edge, dap, dapper, dashing, designer, designer furniture, Device, devices gadgets, each room with unique style, elegant, exclusive, faddish, fresh, futuristic, Gadget, high-tech, innovative, interesting mirrors, Large glass light fixtures, last word, latest, latest thing, latter-day, leading-edge, minimalist, mod, modern, modernistic, modernized, modish, monochromatic, natty, neoteric, newfangled, new-fashioned, novel, now, pioneering, Pottery-Barn, present, present-day, prevailing, prevalent, queer designs, recent, recessed lighting, revolutionary, sharp, silver, smart, sofa pits, solar panels, stainless-steel, state-of-the-art, styled, stylish, swank, today, track lighting, trendy, twenty-first century, Up-to-date, up-to-the-minute, visionary, voguish, wall art, wired, with-it, Urban interior design stems from modern designer lofts major cities. Larger furniture (sofas, beds, etc. ) tends be uniformly sleek with low-profile. Urban decor reflects cosmopolitan chic preferences city dwellers. For living room, pair minimalist coffee table with Southwestern Moroccan rug. Gold copper colored decor fits neatly place. Taking cues from its cosmopolitan environment, urban modern fusion various opposing complementary traits. Minimalist modern, glamorous chic, ethnic heirlooms, edgy experimental designs all collide distinctively 21st-century setting. Feel free bring home trailblazing modern furniture designs. Decorative accents pillows, mirrors, end tables, etc. urban decor often demands artistic creative expression add some elegant geometric designs, vintage items with traditional embellishment. Always stylish vogue, urban furniture tends be modern fresh, mixed with world-inspired accents. urban modern sofa should lay low. dining room, consider wooden dining table with gently sloped legs. dining chairs should match with very basic tufting. Urban furniture decor offers casual lively ambience for your home our collection delivers latest this trend.',
              'Vintage , 18th century, Antique, antique, archetypal, armoire, birch framed, brick, bronze, cabbage roses, canopies, canopy, capital, champion, choice, Classic, classical, claw foot tub, colonial, colored walls, consummate, definitive, distinguished, eighteenth century, esthetic, excellent, exemplary, exposed beams, family photos, famous, fine, finest, first-rate, flawless, flea-market, floor rugs, focussed on room furniture, footlocker, gray, historic, ideal, ledges, master, masterly, mature, mirrors, nicely painted, Old, Ornate, ornate, paradigmatic, paramount, perfect, pillows, pocket watch, preserved, prime, print wallpaper, prototypal, prototypical, quality, quilt, quintessential, quite areas, ranking, rare, representative, ripe, ruffles, Scattered antiques around, select, selected, seventies, simple, skeleton keys, Slay beds bedrooms, smaller rooms, standard, superior, Tiffany lamp, time-honored, top, top-notch, trunk, twenties, typical, usual, venerable, Victorian, vintage, wallpaper, well-known, wine, 1 2 1/2 stories, Symmetrical, Side-gabled hipped, medium pitched roofs (front gabled buildings are uncommon) Boxed eaves with moderate overhang. Dentil molding; frieze band beneath cornice Decorative surrounds on doorways including pediments, sidelights, transoms Windows double hung sashes. Multiple lights upper lower, upper with single pane below. Wide variety different window configurations including paired, triple, bayed arched Balustrades on porch portico are common Additions including side porches sun rooms are common. Commanding facade with full height porch, its roof supported by classical columns. columns are often fluted capitals are usually ornate Ionic Corinthian. Variations height, width, roof style porch account for subtypes. Curved, flat roofed porticos are seen occasionally. Ornamental detail includes broken unbroken pediments side lights surrounding entry. interest Neoclassical Revival style stemmed primarily from 1893 Columbian World Exposition Chicago creation White City Neoclassical, ornamental Like Colonial Revival, which comparatively simple, symmetrical with its entry centered flanked by balanced array windows. Unlike Early Classical Revival Greek Revival houses 19th century, Neoclassical houses may have variety detail elaborations such side extensions well paired, transom, bay windows. Classical detailing at eave common with embellishments like modillions dentil molding. most notable architects day designed classically inspired buildings house many exhibits at fair. Spectacularly, buildings were lighted at night with strings electric lights. Though was used for residences, Neoclassical Revival was more prominently used for public buildings banks institutions where gravitas was expected. ',
              'Industrial, abstruse, automated, big high ceilings, big stoves ranges, big windows, black blinds, bolts, budgetary, business, cement finish, chandelier, chrome, commercial, concrete, Concrete floors, concrete slab, container, dark wood, digital art, dimmers, ductwork, echo, Edison bulbs, exposed beam, brick, metal beams, pipes, vent, factory-made, fiscal, floor ceiling glass, focal points room, forged, garage, gears, glass stairs, gray, high ceilings, high-tech, humble materials, industry, industrial, industrialized, iron, Large Clocks, large paintings, le creuset, leather, loft, lots glass, Lots metal, machine-made, manufactured, manufacturing, material, matte, mechanical, mechanized, mercantile, metal, metal stairs, methodological, modern, monetary, money-making, non-traditional, occupational, open spaces, pecuniary, pots pans hanging from wires, productive, professional, profitable, profit-making, raw, remunerative, restoration hardware, restricted, rolled steel, salvage, scholarly, scientific, slats, smokestack, solvent, special, specialized, squarish furniture, stainless steel appliances, steampunk, steel, streamlined, strength, stripped-back, tall ceiling, technical, technological, trunks, unconventional, utilitarian, very sparse terms furniture, viable, vocational, warehouse, welded, Work, This look that hearkens back turn-of-the-century industrial era. With blend exposed steel rustic wood, industrial decor one my favorite design styles for its ability achieve aesthetic balance. Industrial sofas chairs often have leather finish. Depending on your preference, industrial decor can err on side contemporary chic rugged steampunk. Industrial furniture relies heavily on raw, unfinished wood. Instead, Id recommend something that either faded generally dark (gray, crimson red, burnt orange, blue). For pillows, throws poufs, pick something that shows off its leather woven texture. Though ceiling lamps are typically overlooked most homes, they form critical component industrial style decor. You can get single statement piece opt for series dimmer Edison bulbs. Mechanical components reminiscent other-era steampunk culture are popular occurrence industrial decor lighting. Rustic color schemes tend feature lot brown beige. Though table can be constructed all wood, can also have exposed steel legs. reinforced concrete. great part about industrial decor that your tables, chairs, sofas will be neutral toned, so your decorative accents can easily fit in. Industrial decor lighting often come two categories: vintage, Old World-inspired lamps with frivolous ornamentation details, modern, geometric designs with brushed grainy steel. Very nice traditional timeless concrete tiles. Old traditional tiles timeless concrete tiles are beautiful for every interior traditional style. Chic, rugged steampunk, Leather, Raw wood, unfinished wood, faded, distressed, textured, woven neutral toned, brushed steel, grainy steel, edison bulbs modern variant commonly includes copper-tone accents. terms general feel, industrial decor often rustic mature. Colors Brown, Beige, Gray, Blue, Teal, Burnt Orange, Crimson red simultaneously organic engineered, bold refined, masculine feminine. emphasizes liberal use exposed steel with distressed wooden elements, You can pick traditional chesterfield opt for more modern low-profile sofa. your home includes exposed brick walls cement floor, any wood, then youre already halfway there. Whether its coffee table, dining table, end table, at least one wooden table must-have achieve genuine industrial decor. Consider distressed oriental rug, textured solid rug, woven jute rug. Have colors complement rug rug solid dark, try adding pieces that are colorful with artistic flair. Keep mind that your sofa, chairs, tables constructed leather raw wood, naturally plenty brown burnt orange. ',
              'Tropical, airy rooms, balcony, balmy, bamboo, bright, bright colors, Caribbean, ceiling fans, dense, equatorial, excessive, Exotic, extreme, exuberant, fertile, flamingo, flourishing, fructiferous, fruit, grown, Hibiscus, high-growing, hot, humid, island, junglelike, lahuala, lanai, large french doors, large potted plants, lavish, lei, Green, lots colors, Lots flowers palms, lush, luxuriant, moist, neon, open sunny, Open floor plan, outdoor, outdoor, overabundant, overgrown, palm tree, Palm trees, Palms, palms, patio porch, permanent vacation, pleasant, pleasure, pool, prolific, rampant, rattan, refreshing, rich, semitropical, small rooms, smaller energy footprint, steamy, sultry, summerlike, summery, sunny, sweltering, temperate, tile, tiled floors, torrid, trees yard, tropic, tropical, Vacation, veranda, Vibrant, vigorous, warm, wicker, wild, naturalTropical style evocative feeling islands lifestyle whose essential elements are relaxation, comfort, ease, genuine hospitality. Tropical style one worlds most popular styles. When we say tropical, we think immediately luxury, exotic beauty hot summer days. main characteristic tropical designed homes are tropical plants flowers inside house outside garden whole yard. Feel tropical breeze while overlooking ocean tropical home plan. Tropical house plans do not have be tropics, they would work well for anyone that enjoys more open, casual lifestyle. Tropical decor all about comfort ease infuses home with relaxing, island-style vibe. Island homes are built for entertaining living indoor-outdoor lifestyle, which why oversize porches, lanais, outdoor showers breezy plantation shutters are common architectural elements. Tropical home decor focuses on textures, natural materials vibrant colors; exotic woods, coral, palm trees, rattan, wicker bamboo shine this decor. Tropical style can be applied not only hot exotic places, but everywhere that you want. Decorating tropical home can be real enjoyment for everyone. Tropical home plans typically enhance tropical lifestyle with design features such beach facing verandas, ample storage open airy floor plan which nice for opening up experiencing sea breeze from your beach front lot. Whether home exotic Bali, vibrant Palm Beach breathtaking Hawaii, tropical homes all have vacation-style appeal. ',
              'Lodge, abode, alfresco, antelope, antlers, auberge, Ballard Design, basic, bear, big fireplace, big wood tables, bivouac, burrow, cabin, cabin porch, camp, campfire, campground, camping ground, caravansary, casual, cedar, chalet, comfort, cottage, couch, country house, darker rooms, deer, den, dormitory, dwelling, encampment, Fireplace, fishing, free, garden, gatehouse, haunt, healthful, hilltop, home, hospice, hostel, hostelry, hotel, house, Hunting, hut, open, informal, inn, invigorating, large couches, large stone fireplaces, lean-to, leather, local artifacts, lodge, log, log cabin, log cabin furniture, log furniture, Logs, Pine, motel, mountain, natural, nature-loving, open areas, out house, out-of-doors, outside, over stuffed couches, overstuffed couches, patio, picnic, plaid, plaids, public house, retreat, roadhouse, rock path, rocking chair, rocks, rugs, rustic, shack, shanty, shed, shelter, smoke, stone, stopover, summer home, tavern, tent, tent city, tepee, tilt, Tons wood, unrestricted, vaulted ceiling, villa, wigwam, wood, wood burning stove, wooden, woods, woodsy, yard, Rustic style all about natural beauty things connection past. Interiors decorated this style are simple, unpretentious, warm. Log construction roughly finished, milled wood Hand-crafted details often with obvious Arts Crafts design elements such stone chimneys, shake roofs, handhewn logs, wrought iron forged hardware. Sometimes incorporated peeled trunks intersecting branches into porch pillars; used branches twigs create intricate railings. Natural materials such local stone timber often milled worked onsite. Windows are often multi-paned casement Rustic style more about materials details than house type. with most architectural styles, by time Great Camp style trickled down middle class at turn 20th century, had been embraced by wealthy Gilded Age homeowners for some time. Base 1926 American Builder Log Houses Summer & Winterd part on early 20th century simplicity movement, rustic camp style was soon synonymous with artistic homes that eschewed stern formality Victorian period. 1926 American Builder Log Houses Summer & Winter PlanThe rustic style was also an expression nostalgia for simpler life Colonists who would founded United States with little more than musket an ax. rustic style was incorporated into National Park System building projects during 1920s 30s, remains predominant style some most beautiful public structures built, including Timberline Lodge on Mount Hood Oregon El Tovar Lodge Grand Canyon National Park 1900, rustic cabin camp was desired primarily summer house escape dirt heat cities. Low, horizontal profile. Shape may be simple rectangle, L-shaped, U-shaped built around courtyard Windows may be double hung sliding. Sliding glass doors deck patio. Large plate glass picture windows are often prominent at front house. Natural materials, Minimal ornamentation Rustic Chic, Countryside Think organic textures, weathered wood, earth tones. houses may be simple structures with just single bedroom multiple bunkrooms. They may have full bathroom, but often earliest homes had no indoor plumbing at all. They ranged construction from single-story log cabins two-story houses. Bungalowsand Arts & Crafts houses particular, were well-adapted style Early environmentalists like Henry David Thoreau, John Muir, Gifford Pinchot raised Americans collective awareness beauty American wilderness. At same time, rapid industrialization fostered backlash that was manifested progressive Arts & Crafts movement. escape heat frenetic pace cities, wealthy families were first establish grand summer homes bucolic lakes region Adirondacks after Civil War. American wilderness Often simple structures with an open floor plan, large covered porch, ample ventilation. Many earliest bungalows are, fact, summer homes. ',
              'Geometric, angles, Architecture, argyle, block tables, bold colors, circles, computative, congruous, decorated with regular lines shapes. , diamond, DIY, eye catching, Figures, Functional, funky, geometrical, graphic, Hexagon, lots octagons, mathematical, measurable, metal sculptures, moroccan, mosaic, Octagonal tables, organized, origami, pattern, polygon, shapes, sparse, spatial, square, square furniture, squares, structural, style over function, symmetrical, tile, Tile wall, ',
              'Trellis, trendy, triangular wall pieces, wall planter, wire sculpturegeometric volumes, shapes lines but some homes stand out because their outstanding designs. urban design wood-clad touches. Stucco hardie panels were used for homes exterior combines different geometric shapes for exterior. also make use different materials create varying textures. Two parallel blocks house were joined together with glass enclosed bridge making look lovely its straight lines edges. combination rectangles this house amazing. addition rectangular pool even made look more mesmerizing! spot geometric lines shapes including square pool on corner. rock facade black finish give this house masculine look especially with geometric shapes lines it. would impress you with inclined lines for facade. cluster geometric volumes forms this 950 square-foot getaway that sits on top concrete piles. Its design compliments with minimalism its natural environment. On one side, you would think that this just small triangular house but once you get side, you will see its full length with red brick finish Two rectangular volumes this house merely separates them from each other but actually connected center. exterior colors lights make look stunning. squared box home design with solid concrete walls materials. Even windows were square-ish shape. Looking bold strong with its geometric features, this house an excellent modern design with touches nature You can see triangles on roof this house setting apart from other home designs. Cedar wood sidings brick stones for homes exteriors complete contemporary look this house with geometric lines. ',
              'Floral, Big floral patterns, blooming, blossoming, blossomy, botanic, bouquet, bright, bright colors, cabbage roses, chintz, Chintzy material, clean, decorative, dendritic, efflorescent, flora, floras, flower, flower-patterned, Flowers, flowery, focus on main entryway dining room, fragrant, fresh flowers, grass, herbaceous, light colors, matching dishes plate sets, mint green, nature, pink, plant, pot pourrie, scalloped floral curtains, seasonal, spring, summer, sweet, sylvan, vase, verdant, white, ',
              'Wreathsbedroom with flowers floral patterns. you can make look like Spring all year round by adding fresh flowers well items with floral patterns could be furniture with flowers, carpet, wallpaper wall art. vase fresh flowers would always be awesome! So, here are some living rooms that are blossoming with florals! you use florals, keep rest decor white so that florals will be highlightedYou can add few furniture with floral prints well fresh flowers your living room. Splendid blues calm tones are reflected this living room with blue floral chairs an arabesque rug. Look at flowers this living room from wall decors, sofa, pillows, area rug others. combination colors this living room pretty floral patterns are gorgeous too! coolness shades here while using floral prints. area rug has tiny flowers that are lovely too. Sweet pink flowers are seen patterns this living room. Super cute ottoman! Well, floral print beautiful that made this look refreshing eyes. Different floral prints are used here but they look good together. floral printed sofa brought blossoms this living room contemporary design. Bohemian living room with florals everywhere well flower wall decors too. Aside from floral curtains, this one has bunch flowers centerpiece. floor-level sofa with floral prints different colors. Black white floral prints are bold accents this living room white. combined purple flowers stripes. Such stunning space that relaxing serene. has flower prints on chairs well on throw pillows. This modern living room looks neat lovely with floral are rug that made this appear very interesting. ',
              'Insignia , adumbrate, arms, arrows, attribute, badge, banner, blazonry, brand, character, coat, coat arms, Coat arms, colophon, colors, comic book heroes, crest, custom things, decoration, design, device, earmark, emblazonry, emblem, ensign, escutcheon, family symbols, fancy cars, figure, flag, font, hallmark, heraldry, his hers towels, identification, image, impress, initials, insignia, Iron-on letters, Label, Letter, logo, mark, marker, matching his hers towels, medal, memento, Military insignia, miniature, monogram, motto, Name brand designer furniture, names, numbers, Paper mache, Paper quilling, paraphernalia, parts service, Patterned Paper, pennant, personalize, Pottery Barn, Ralph Lauren, regalia, reminder, representation, Restoration Hardware, scepter, seal, shield, sign, signet, signs, skull cross bones, slogan, sororities, standard, symbol, thumbtacks, token, trademark, type, ',
              'Typography, Personalization, Monogram home decors can be good way for self-expression especially you do with letters type. Cut letters from magazine, arrange them creatively, paint over have enlarged after being photocopied. Paper mache letters painted make look metallic Cut letters from old maps patterned paper create decor piecesPop-up letters could look really nice poster your wall. some wood, add stain, place vinyl letters, paint over it, remove letters voila! Make some typography wall art gold using four different materials. Stenciled letters clipped on clipboard could also look nice on wall. With magazine pages patterned paper under white paint, you can get artistic results Made from fabric place mats iron on letters, you can place banner on your walls Turning paint chips at home into an artwork with some words on top it. Sketch letters on wall put thumbtacks following lines. Paper quilling indeed fun! You can make many letters you want to. '
              ]
    X = vectorizer.fit_transform(corpus)
    analyze = vectorizer.build_analyzer()
    print(X.toarray())
    print('dim row: %s, col: %s' % (len(X.toarray()),len(X.toarray()[0])))
    print(vectorizer.get_feature_names()[1:10])
    bow = vectorizer.get_feature_names()
    sentToken = analyze(sentence)
    print(sentToken)
    for pS in sentToken:
        if(pS in bow):
            print(pS)

#test_keywords('i love state of the art sea beach')

def get_statements_from_logs(query):
    url = 'https://search-logscrub-svijutj4yhzc32t5bhzf3yzm5y.us-east-1.es.amazonaws.com/_search?q='+query
    headers = {'content-type': 'application/json'}
    resp = requests.request("GET", url, data={}, headers=headers)
    data = resp.json()
    idx = 0
    for info in data['hits']['hits']:
        print(info['_source']['@message'].split(':')[1])
        idx+=1
    print(idx)
#get_statements_from_logs('statement')

def scrub_cloudwatch_logs():
    import boto3
    s3 = boto3.resource('s3')
    s3_client = boto3.client('s3')
    bucket = s3.Bucket('logs.sapient-ai.com')
    print(bucket)
    import gzip
    
    for obj in bucket.objects.all():
        if(obj.key.split('/')[0] == 'lambda' and len(obj.key.split('/'))>3):
            #print(obj.key)
            s3_client.download_file('logs.sapient-ai.com',obj.key,'d:\\s3_logs\\'+obj.key.split('/')[3]+'-'+obj.key.split('/')[4])
            with gzip.open('d:\\s3_logs\\'+obj.key.split('/')[3]+'-'+obj.key.split('/')[4], 'rb') as f:
                file_content = f.readlines()
                for line in file_content:
                    if ('statement loop procesing' in line):
                        print( line)
                        with open('d:\\s3_logs\\statements.txt','a+') as fl:
                            fl.write(line)
                            #fl.write('\n')

    
def get_intent(request,sentence):
    import nltk
    url = 'http://conceptnet5.media.mit.edu/data/5.4/search?limit=10&rel=/r/Synonym&end=/c/en/'
    headers = {'content-type': 'application/json'}
    intents = ['ask for','aspire','attempt','buy','cherish','contemplate','covet','crave','desire','dream','endeavor','enjoy','get','hanker','hold dear','inquire','intend','like','long','love','need','purpose','pursue','request','require','seek','try','want','wish','yearn']
    text = nltk.word_tokenize(sentence)
    tokens = nltk.pos_tag(text)
    from nltk.stem import PorterStemmer
    stemmer = PorterStemmer()
    for pS in tokens:
        token = stemmer.stem(pS[0])
        if(token in intents):
            print('looking for something')
        
        